# Google Sign-In Setup Instructions

## Problem
The error "Unable to establish connection on channel: dev.flutter.pigeon.google_sign_in_android.GoogleSignInApi.init" occurs because Google Sign-In is not properly configured in Firebase Console.

## Solution

### Step 1: Get Your SHA-1 and SHA-256 Fingerprints

**Option A: Using Android Studio**
1. Open your project in Android Studio
2. Open the Gradle panel (right side)
3. Navigate to: `android` > `app` > `Tasks` > `android` > `signingReport`
4. Double-click `signingReport` to run it
5. Copy the SHA-1 and SHA-256 fingerprints from the output

**Option B: Using Command Line (Windows)**
```powershell
cd android
.\gradlew signingReport
```
Look for the SHA-1 and SHA-256 values in the output.

**Option C: Using Keytool (if you have a keystore)**
```powershell
keytool -list -v -keystore "%USERPROFILE%\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android
```

### Step 2: Add Fingerprints to Firebase Console

1. Go to [Firebase Console](https://console.firebase.google.com/)
2. Select your project: `tailorx-jaat001`
3. Click the gear icon ⚙️ next to "Project Overview"
4. Select "Project settings"
5. Scroll down to "Your apps" section
6. Find your Android app: `com.abdulrahman.tailorx_app`
7. Click "Add fingerprint"
8. Add both SHA-1 and SHA-256 fingerprints
9. Click "Save"

### Step 3: Enable Google Sign-In in Firebase Authentication

1. In Firebase Console, go to "Authentication"
2. Click on "Sign-in method" tab
3. Find "Google" in the list
4. Click on it and enable it
5. Enter your project's support email
6. Click "Save"

### Step 4: Download Updated google-services.json

1. In Firebase Console, go to "Project settings"
2. Scroll to "Your apps" section
3. Find your Android app
4. Click the download icon to download `google-services.json`
5. Replace the existing file at `android/app/google-services.json` with the new one

### Step 5: Verify Configuration

The new `google-services.json` should have OAuth client IDs in the `oauth_client` array. It should look something like:

```json
"oauth_client": [
  {
    "client_id": "YOUR_CLIENT_ID.apps.googleusercontent.com",
    "client_type": 1,
    "android_info": {
      "package_name": "com.abdulrahman.tailorx_app",
      "certificate_hash": "YOUR_SHA1_HASH"
    }
  },
  {
    "client_id": "YOUR_WEB_CLIENT_ID.apps.googleusercontent.com",
    "client_type": 3
  }
]
```

### Step 6: Clean and Rebuild

```powershell
flutter clean
flutter pub get
cd android
.\gradlew clean
cd ..
flutter run
```

## Troubleshooting

- **Still getting errors?** Make sure you've restarted the app after updating `google-services.json`
- **Fingerprints not working?** Make sure you're using the correct keystore (debug vs release)
- **OAuth client still empty?** Wait a few minutes after adding fingerprints, then re-download `google-services.json`

## Additional Notes

- For release builds, you'll need to add your release keystore's SHA-1 and SHA-256 fingerprints as well
- The OAuth client IDs are automatically generated by Firebase when you add the fingerprints

